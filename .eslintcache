[{"/home/badr/amttul/immobilier/src/SideSaleBody.tsx":"1","/home/badr/amttul/immobilier/src/App.tsx":"2","/home/badr/amttul/immobilier/src/SideFilterBody.tsx":"3","/home/badr/amttul/immobilier/src/index.tsx":"4","/home/badr/amttul/immobilier/src/SideHeader.tsx":"5","/home/badr/amttul/immobilier/src/SideSaleBar.tsx":"6"},{"size":599,"mtime":1610911375393,"results":"7","hashOfConfig":"8"},{"size":11355,"mtime":1610911765891,"results":"9","hashOfConfig":"8"},{"size":1221,"mtime":1610896935629,"results":"10","hashOfConfig":"8"},{"size":147,"mtime":1610875645337,"results":"11","hashOfConfig":"8"},{"size":369,"mtime":1610882892096,"results":"12","hashOfConfig":"8"},{"size":453,"mtime":1610887883487,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"16"},"19z89dq",{"filePath":"17","messages":"18","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/badr/amttul/immobilier/src/SideSaleBody.tsx",["29","30","31","32"],"import React from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport styles from './App.module.css';\n\nimport Point from \"./Point\"\nimport { LatLngTuple } from 'leaflet';\n\n\nconst SideFilterBody: React.FC = (props : any) => \n{\n  const { register, handleSubmit } = useForm();\n\n  return (\n    <div className={styles.sidebarBody}>\n        <p>{props.point.locality}</p>\n        <p>{props.point.address}</p>\n        <p>{props.point.surface} m2</p>\n        <p>{props.point.price.toLocaleString('fr-FR', {style: 'currency', currency: 'EUR',})}</p>\n    </div>\n  \n  );\n}\n\nexport default SideFilterBody;","/home/badr/amttul/immobilier/src/App.tsx",["33","34","35","36"],"// Packages\nimport { PropsWithChildren } from 'react';\nimport React, { useState, useEffect } from 'react';\n\nimport axios from 'axios';\nimport { LatLngTuple } from 'leaflet';\nimport { MapContainer, Marker, TileLayer, useMapEvent} from 'react-leaflet';\n\nimport Key from './Key';\n\nimport './Global.css';\nimport styles from './App.module.css';\n\nimport SideFilterBar from './SideFilterBar';\nimport SideSaleBar from './SideSaleBar';\n\nimport { renderToStaticMarkup } from 'react-dom/server';\nimport { divIcon } from 'leaflet';\n\nimport Point from \"./Point\"\n\nconst App: React.FC = () => \n{\n  const iconMarkup = renderToStaticMarkup(<i className=\" fa fa-map-marker-alt fa-3x\" />);\n  const customMarkerIcon = divIcon({html: iconMarkup});\n\n  // Points\n  const latlng : LatLngTuple = [43.2969500, 5.3810700];\n  const point : Point = { country : \"France\", district : \"7e\", locality : \"Marseille\", address : \"125 rue du vallon des auffes\", price : 0, surface : 0, coordinates : latlng};\n  \n  const [mapZoom, setMapZoom] = useState<number>(12);\n  const [mapPosition, setMapPosition] = useState<LatLngTuple>(latlng);\n\n  const [selectedPoint, setSelectedPoint] = useState<Point>(point);\n  const [selectedPoints, setSelectedPoints] = useState<Point[]>([]);\n\n  function filter(data : Point[], priceMin : number, priceMax : number, surfaceMin : number, surfaceMax : number) : Point[]\n  {\n    if(!priceMin)\n    {\n      console.log(\"Setting price min to a default value : %s\", 0)\n      priceMin = 0;\n    }\n\n    if(!priceMax)\n    {\n      console.log(\"Setting price max to a default value : %s\", Number.MAX_VALUE)\n      priceMax = Number.MAX_VALUE\n    }\n\n    if(!surfaceMin )\n    {\n      surfaceMin = 0;\n    }\n\n    if(!surfaceMax)\n    {\n      surfaceMax = Number.MAX_VALUE\n    }\n\n    console.log(\"Price min : %s\", priceMin);\n    console.log(\"Price max : %s\", priceMax);\n    console.log(\"Surface min : %s\", surfaceMin);\n    console.log(\"Surface max : %s\", surfaceMax);\n\n    const points : Point[] = [];\n    let length = data.length;\n    for (let i = 0; i < length; i++) \n    {\n      if(data[i].coordinates[0] && data[i].coordinates[1]) \n      {\n        if(data[i].price >= priceMin && data[i].price <= priceMax)\n        {\n          if(data[i].surface >= surfaceMin && data[i].surface <= surfaceMax)\n          {\n            points.push(data[i]);\n          }\n        }\n      }\n    }\n\n    console.log(\"Output : %s elements\", points.length);\n    return points;\n  }\n\n  function deleteOrigin(coordinates : Point[]) : Point[]\n  {    \n    const points = [...coordinates];\n    for (let i = 0; i < points.length; i++) \n    {\n      if(points[i].coordinates[0] === 0 && points[i].coordinates[1] === 0) \n      {\n        points.splice(i, 1);\n        i--;\n      }\n    }\n\n    return points;\n  }\n\n  // Search Map Coordinates\n  async function onFilteringSubmitForm(data: any) \n  {\n    console.log(\"Filtering ...\")\n    console.log(\"Zipcode : %s.\", data.zipcode);\n    let output = await axios.get(`http://api.cquest.org/dvf?code_postal=${data.zipcode}`);\n    let response = output.data.resultats;\n\n    if(!response)\n      return;\n\n    let points: Point[] = response.map((item) => \n    {\n      if(item.lat != null && item.lon != null)\n        return {country : \"France\", district : item.zipcode, locality : item.commune, address : item.code_voie + \" \" + item.type_voie + \" \" + item.voie, price : item.valeur_fonciere, surface : item.surface_relle_bati, coordinates :  [item.lat, item.lon]}\n      else \n        return {country : \"France\", district : \"\", locality : \"\", address : \"\", coordinates:  [0, 0]};\n    });\n    \n    points = deleteOrigin(points);\n    console.log(\"Bing outputs a set of %s elements.\", points.length)\n    \n    points = filter(points, data.price_min, data.price_max, data.surface_min, data.surface_max);\n    setSelectedPoints(points);\n    setMapZoom(18)\n}\n\n  // Search Map Coordinates\n  async function onZipcodeSubmitForm(data: any) \n  {\n    console.log(\"Filtering ...\")\n    console.log(\"Zipcode : %s.\", data.zipcode);\n    console.log(\"City : %s.\", data.city);\n    console.log(\"Address : %s.\", data.address);\n\n    let output = await axios.get(`http://api.cquest.org/dvf?code_postal=${data.zipcode}`);\n    let center = await axios.get(`http://dev.virtualearth.net/REST/v1/Locations/FR/${data.zipcode}/${data.city}/${data.address}?key=${Key}`)\n    let response = output.data.resultats;\n\n    if(!response)\n      return;\n\n    let points: Point[] = response.map((item) => \n    {\n      if(item.lat != null && item.lon != null)\n        return {country : \"France\", district : item.zipcode, locality : item.commune, address : item.code_voie + \" \" + item.type_voie + \" \" + item.voie, price : item.valeur_fonciere, surface : item.surface_relle_bati,  coordinates :  [item.lat, item.lon]}\n      else \n        return {country : \"France\", district : \"\", locality : \"\", address : \"\", coordinates:  [0, 0]};\n    });\n\n    let centerPoint : LatLngTuple = [0,0]\n    if (center) \n    {\n      centerPoint = center.data.resourceSets[0].resources[0].geocodePoints[0].coordinates;\n    }\n\n    console.log(\"Center coordinates : %s - %s\", centerPoint[0], centerPoint[1]);\n\n    points = deleteOrigin(points);\n\n    console.log(\"Initializing with a subset of 10 sales.\");\n    let sample : Point[] = points.slice(1, 10);\n    setSelectedPoints(sample);\n    setMapPosition(centerPoint);\n    setMapZoom(12);\n  }\n\n  function onPointSelected(point : Point)\n  {\n    setSelectedPoint(point);\n  }\n\n  // Show Point\n  function showPoint(pointIndex: number): void \n  {\n    console.log(\"Point selected.\");\n    setMapPosition(selectedPoints[pointIndex].coordinates);\n    setSelectedPoint(selectedPoints[pointIndex]);\n  }\n\n  async function onSeLogerProtobufGet(input : any)\n  {\n\n  }\n\n  async function onSeLogerJsonCheck(input : any)\n  {\n    var myHeaders = new Headers();\n    myHeaders.append(\"authority\", \"www.seloger.com\");\n    myHeaders.append(\"accept\", \"application/json\");\n    myHeaders.append(\"user-agent\", \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36 OPR/73.0.3856.344\");\n    myHeaders.append(\"content-type\", \"application/json\");\n    myHeaders.append(\"origin\", \"https://www.seloger.com\");\n    myHeaders.append(\"referer\", \"https://www.seloger.com/list.htm?projects=2,5&types=1,2&natures=1,2,4&places=[{%22inseeCodes%22:[130207]}]&price=100000/200000&enterprise=0&qsVersion=1.0&m=search_refine\");\n    myHeaders.append(\"accept-language\", \"en-US,en;q=0.9\");\n    myHeaders.append(\"cookie\", \"G_ENABLED_IDPS=google; G_AUTHUSER_H=0; didomi_token=eyJ1c2VyX2lkIjoiMTc3MTBmYTYtOTM5Zi02Y2VjLTlkNmEtZjA3M2MxZDVkYjExIiwiY3JlYXRlZCI6IjIwMjEtMDEtMTdUMTU6MzM6MjYuNDg5WiIsInVwZGF0ZWQiOiIyMDIxLTAxLTE3VDE1OjMzOjI2LjQ4OVoiLCJ2ZW5kb3JzIjp7ImVuYWJsZWQiOlsiZmFjZWJvb2siLCJnb29nbGUiLCJjOm9tbml0dXJlLWFkb2JlLWFuYWx5dGljcyIsImM6aGFydmVzdC1QVlRUdFVQOCIsImM6ZmFjZWJvb2stYnRDNFpXNnIiXX0sInB1cnBvc2VzIjp7ImVuYWJsZWQiOlsiYW5hbHlzZWRlLVZEVFVVaG42Iiwic29jaWFsIiwiZGV2aWNlX2NoYXJhY3RlcmlzdGljcyIsImdlb2xvY2F0aW9uX2RhdGEiXX0sInZlbmRvcnNfbGkiOnsiZW5hYmxlZCI6WyJnb29nbGUiXX0sInZlcnNpb24iOjIsImFjIjoiQWt1QUNBa3MuQWt1QUNBa3MifQ==; euconsent-v2=CPAK3fBPAK3fBAHABBENBICsAP_AAH_AAAAAHPNf_X_fb3_j-_59_9t0eY1f9_7_v-0zjgeds-8Nyd_X_L8X42M7vF36pq4KuR4Eu3LBIQdlHOHcTUmw6IkVrTPsbk2Mr7NKJ7PEinMbe2dYGH9_n9XTuZKY79_s___z__-__v__7_f_r-3_3_vp9X---_e_UDnQCTDUvgIsxLHAkmjSqFECEK4kOgFABRQjC0TWEBK4KdlcBH6CBgAgNQEYEQIMQUYsAgAAAACSiICQA8EAiAIgEAAIAVICEABGgCCwAkDAIABQDQsAIoAhAkIMjgqOUwICJFooJ5KwBKLvYwwhDKLACgUf0EAA.f_gAD_gAAAAA; visitId=1610897606594-1243479590; _gid=GA1.2.16492156.1610897607; _gcl_au=1.1.1392762776.1610897607; atuserid=%7B%22name%22%3A%22atuserid%22%2C%22val%22%3A%22632735e7-904a-4ae3-a4f3-bc1cb9dd1d0c%22%2C%22options%22%3A%7B%22end%22%3A%222022-02-18T15%3A33%3A27.495Z%22%2C%22path%22%3A%22%2F%22%7D%7D; AMCVS_366134FA53DB27860A490D44%40AdobeOrg=1; s_ecid=MCMID%7C78574570141984252503225943147794071161; s_visit=1; s_dl=1; c_m=undefinedTyped%2FBookmarkedTyped%2FBookmarkedundefined; stack_ch=%5B%5B%27Acces%2520Direct%27%2C%271610897608249%27%5D%5D; s_cc=true; AMCV_366134FA53DB27860A490D44%40AdobeOrg=1099438348%7CMCIDTS%7C18645%7CMCMID%7C78574570141984252503225943147794071161%7CMCAAMLH-1611502407%7C6%7CMCAAMB-1611502407%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1610904807s%7CNONE%7CMCAID%7CNONE%7CMCSYNCSOP%7C411-18652%7CvVersion%7C2.1.0; ry_ry-s3oa268o_realytics=eyJpZCI6InJ5XzNGRjgzMkQ4LTQzNkYtNENFMy04Qzk1LTU5MDg5RDZCNDhEMCIsImNpZCI6bnVsbCwiZXhwIjoxNjQyNDMzNjA3NDMxLCJjcyI6MX0%3D; ry_ry-s3oa268o_so_realytics=eyJpZCI6InJ5XzNGRjgzMkQ4LTQzNkYtNENFMy04Qzk1LTU5MDg5RDZCNDhEMCIsImNpZCI6bnVsbCwib3JpZ2luIjp0cnVlLCJyZWYiOm51bGwsImNvbnQiOm51bGwsIm5zIjpmYWxzZX0%3D; realytics=1; mics_uaid=web:1056:b4fe7f83-41ce-4470-aa7a-f2f9fa268ca3; uid=b4fe7f83-41ce-4470-aa7a-f2f9fa268ca3; mics_vid=10901072455; mics_lts=1610897609844; mics_vid=10901072455; mics_lts=1610897609844; __gads=ID=771a2e197deba2bb:T=1610897707:S=ALNI_MZU21gangPRP_FZQmhdlssQitV6KA; _ga=GA1.1.706503622.1610897607; datadome=_Izu6NdtD3zrVqFDd7AjHlrYFRp95VZpIXbphc6JShk0RhFw~S1GqcZnmTzL5zX_whlwTQogSvVojs3SUfWtTxIRev0gBoSKIQ3Bp_ijOg; _ga_MC53H9VE57=GS1.1.1610897606.1.1.1610903801.0; s_getNewRepeat=1610903813744-New; s_sq=selogerprod%252Cselogerglobalprod%3D%2526c.%2526a.%2526activitymap.%2526page%253Dsearch_results%2526link%253DAppliquer%2526region%253Dagatha-kk1ef8j1%2526pageIDType%253D1%2526.activitymap%2526.a%2526.c%2526pid%253Dsearch_results%2526pidt%253D1%2526oid%253DAppliquer%2526oidt%253D3%2526ot%253DSUBMIT; datadome=Bu_yLgnxepCMqWelUfN7MpiWE7d~pc8lXVjV_rPQGAPvmk8V_iCft50npyhNQTqiTK8MdBH86~4Zn5NezzCVLHQF~TjLX5tZKrDj1cMqY4\");\n\n    var raw = JSON.stringify({\"enterprise\":false,\"projects\":[2,5],\"types\":[1,2],\"places\":[{\"label\":\"Marseille 7Ã¨me\",\"inseeCodes\":[130207]}],\"price\":{\"min\":100000,\"max\":200000},\"natures\":[1,2,4]});\n\n    var requestOptions : any = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n\n    fetch(\"https://www.seloger.com/list/api/externaldata?from=0&size=25&isSeo=false\", requestOptions)\n      .then(response => response.text())\n      .then(result => console.log(JSON.parse(result).classifiedsData))\n      .catch(error => console.log('error', error));\n\n\n  }\n\n  let sideFilterProps : PropsWithChildren<any> = {onFilteringSubmit : onFilteringSubmitForm, onZipcodeSubmit : onZipcodeSubmitForm, points : selectedPoints, showPoint : () => showPoint};\n  let sideSaleProps : PropsWithChildren<any> = {point : selectedPoint} \n\n  return (\n    <div className={styles.container}>\n      <SideFilterBar {...sideFilterProps}/>\n      <div className={styles.map}>\n        <MapContainer center={mapPosition} zoom={mapZoom}>\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution=\"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\"\n          />\n          {selectedPoints.map(item =><Marker icon={customMarkerIcon} position={item.coordinates} eventHandlers={{click : () => onPointSelected(item)}}></Marker>)}\n        </MapContainer>\n      </div>\n      <SideSaleBar {...sideSaleProps}/>\n    </div>\n  );\n}\n\nexport default App;\n\n// {selectedPoints.map(item =><Marker position={item.coordinates} eventHandlers={{click : () => {console.log(\"in\")},}}><Popup eventHandlers={{click : () => {console.log(\"in\")},}}>{showPointInfo(item)}</Popup></Marker>)}\n","/home/badr/amttul/immobilier/src/SideFilterBody.tsx",["37","38","39"],"import React from 'react';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { LatLngTuple } from 'leaflet';\nimport { useMapEvents } from \"react-leaflet\";\n\nimport styles from './App.module.css';\n\nconst SideFilterBody: React.FC = (props : any) => \n{\n  const { register, handleSubmit } = useForm();\n\n  return (\n    <div className={styles.sidebarBody}>\n      <form onSubmit={handleSubmit(props.onZipcodeSubmit)} autoComplete=\"off\">\n        <input type=\"text\" placeholder=\"Code Postal\" name=\"zipcode\" ref={register()} multiple/>\n        <button type=\"submit\">\n          Filtrer\n        </button>\n      </form>\n      <form onSubmit={handleSubmit(props.onFilteringSubmit)} autoComplete=\"off\">\n        <input type=\"number\" placeholder=\"Surface min\" name=\"surface_min\" ref={register()} />\n        <input type=\"number\" placeholder=\"Surface max\" name=\"surface_max\" ref={register()} />\n        <input type=\"number\" placeholder=\"Prix min\" name=\"price_min\" ref={register()} />\n        <input type=\"number\" placeholder=\"Prix max\" name=\"price_max\" ref={register()} />\n        <button type=\"submit\">\n          Filtrer\n        </button>\n      </form>\n    </div>\n  \n  );\n}\n\nexport default SideFilterBody;","/home/badr/amttul/immobilier/src/index.tsx",[],"/home/badr/amttul/immobilier/src/SideHeader.tsx",[],"/home/badr/amttul/immobilier/src/SideSaleBar.tsx",[],{"ruleId":"40","severity":1,"message":"41","line":6,"column":8,"nodeType":"42","messageId":"43","endLine":6,"endColumn":13},{"ruleId":"40","severity":1,"message":"44","line":7,"column":10,"nodeType":"42","messageId":"43","endLine":7,"endColumn":21},{"ruleId":"40","severity":1,"message":"45","line":12,"column":11,"nodeType":"42","messageId":"43","endLine":12,"endColumn":19},{"ruleId":"40","severity":1,"message":"46","line":12,"column":21,"nodeType":"42","messageId":"43","endLine":12,"endColumn":33},{"ruleId":"40","severity":1,"message":"47","line":3,"column":27,"nodeType":"42","messageId":"43","endLine":3,"endColumn":36},{"ruleId":"40","severity":1,"message":"48","line":7,"column":43,"nodeType":"42","messageId":"43","endLine":7,"endColumn":54},{"ruleId":"40","severity":1,"message":"49","line":181,"column":18,"nodeType":"42","messageId":"43","endLine":181,"endColumn":38},{"ruleId":"40","severity":1,"message":"50","line":186,"column":18,"nodeType":"42","messageId":"43","endLine":186,"endColumn":36},{"ruleId":"40","severity":1,"message":"51","line":2,"column":10,"nodeType":"42","messageId":"43","endLine":2,"endColumn":18},{"ruleId":"40","severity":1,"message":"44","line":5,"column":10,"nodeType":"42","messageId":"43","endLine":5,"endColumn":21},{"ruleId":"40","severity":1,"message":"52","line":6,"column":10,"nodeType":"42","messageId":"43","endLine":6,"endColumn":22},"@typescript-eslint/no-unused-vars","'Point' is defined but never used.","Identifier","unusedVar","'LatLngTuple' is defined but never used.","'register' is assigned a value but never used.","'handleSubmit' is assigned a value but never used.","'useEffect' is defined but never used.","'useMapEvent' is defined but never used.","'onSeLogerProtobufGet' is defined but never used.","'onSeLogerJsonCheck' is defined but never used.","'useState' is defined but never used.","'useMapEvents' is defined but never used."]